\documentclass[ams,openany,10pt,presentation,latin1]{mathbook}
\usepackage{kpfonts}
\usepackage{listings}
\usepackage{mathrsfs}
\definecolor{bleu}{cmyk}{0.59,0.11,0,0.59}
\definecolor{vert}{cmyk}{0.78,0,0.74,0.45}
\lstset{
	numbers=left, 
	numberstyle=\tiny, 
	stepnumber=1, 
	numbersep=3pt, 
	language=[LaTeX]TeX, 
	backgroundcolor=\color{bleu!20},
	frame=shadowbox,
	rulesepcolor=\color{bleu},
	rulecolor=\color{bleu},
	framexleftmargin=10pt,
	keywordstyle=\color{vert}\bfseries,
	basicstyle=\ttfamily,
    columns=flexible,
    keepspaces=true,
    upquote=true,
    commentstyle=\color{gray},
    morekeywords={redefineColor,dfrac,setlength,cellspacetoplimit, cellspacebottomlimit,firstline,text,intro,introauthor,chapter, itemclass,exostart,corrstart,AfficheCorriges,columnbreak,titlepic, nbcolindex,indexname,printindex,makeindex,activites, DefineNewBoxLikeRem,BreakCorr}
}
\usepackage{lipsum}
\title{Test v1.5}
\author{Box}
\titlepic[0.5]{fractal.jpg}
\date{\today}
\makeindex
\begin{document}

\frontmatter

\maketitle

{
\makeatletter
\sectiontitle@font
\tableofcontents
\makeatother
}

\mainmatter

\intro{There're clues everywhere}
\introauthor{Lynch}

\chapter{Physics is cool}
\section{Do a list}\index{extensions}

\begin{center}
\begin{tabular}{|*2{S{m{0.45\linewidth}}|}}
\hline\firstline
\color{bleu}Names & \color{bleu}\bfseries Uses\\
\hline
book.cls  &  class\\
\hline

\end{tabular}
\end{center}

\newpage

\section{Appel de la classe}

\begin{lstlisting}
\documentclass[<options>]{mathbook}
\end{lstlisting}

\subsection{Les options}\index{options}

\subsubsection{Pour la classe \og book \fg}

\begin{itemize}
\item \texttt{openany} pour �viter les pages blanches
\item \texttt{10pt}, \texttt{11pt} ou \texttt{12pt} pour la taille des caract�res
\end{itemize}

\subsubsection{Pour l'extension \og inputenc \fg}

Vous avez le choix entre :

\begin{multicols}{3}
\begin{itemize}
\item \texttt{ascii}
\item \texttt{ansinew}
\item \texttt{applemac}
\item \texttt{latin1}
\item \texttt{latin9}
\item \texttt{utf8}
\end{itemize}
\end{multicols}

\subsubsection{Les paquets AMS}

Pour charger les extensions \texttt{amsmath}, \texttt{amssymb} et \texttt{amsfonts}, on mettra l'option :

\begin{itemize}
\item \texttt{ams}
\end{itemize}

\subsubsection{Page avant chaque chapitre}

'Zavez remarqu� ? Avant chaque chapitre de cette documentation, il y a une page de pr�sentation ...

\intro{}
\introauthor{}
\chapter{Les couleurs et fontes}

\section{Les couleurs}\index{couleurs}

\subsection{Les couleurs par d�faut}

\begin{center}
\begin{longtable}{|*3{>{\centering\arraybackslash}m{0.33\linewidth}|}}
\hline\firstline
\color{bleu}\bfseries Noms & \color{bleu}\bfseries Valeurs (CMYK) & \color{bleu}\bfseries Correspondances\\
\hline
chapter\verb+@+bg@color &  1,0.2,0.3,0.1 & Fond du titre \og Chapitre ... \fg{} \\
\hline
chapterdegrade\verb+@+color & 0.21,0.04,0,0.18 & D�grad� de chaque premi�re page des chapitres\\
\hline
chapterellipse\verb+@+bg@color & 0.33,0.07,0,0.18 & Fond de l'ellipse la plus grande en haut � gauche sur chaque premi�re page des chapitres\\
\hline
chapterellipse\verb+@+color & 0,0,0,0 & Fond de l'ellipse la plus petite o� est �crit \og Chapitre ... \fg{} \\
\hline
chaptertitlename\verb+@+color & 0,0,0,0 & Couleur du texte \og Chapitre ... \fg\\
\hline
chapterrule\verb+@+color & 0.38,0.06,0,0.22 & Traits verticaux sur toute la hauteur de la premi�re page de chaque chapitre\\
\hline
chaptermidcircle\verb+@+color & 0.21,0.04,0,0.14 & Cercle presque centr� verticalement sur la premi�re page de chaque chapitre\\
\hline
chapterbotcircle\verb+@+color & 0.06,0.01,0,0.05 & Cercle du bas de la premi�re page de chaque chapitre\\
\hline
chaptertopcircle\verb+@+color & 0.13,0.02,0,0.1 & Cercles en haut � droite de la premi�re page de chaque chapitre\\
\hline
chapterline\verb+@+color & 0.27,0.03,0,0.17 & Trait oblique en haut � droite sur la premi�re page de chaque chapitre\\
\hline
pagenumber\verb+@+bg\verb+@+color & 0.94,0.37,0,0.17 & Fond des num�ros de page\\
\hline
shadow\verb+@+color & 0.07,0,0,0.49 & Ombres\\
\hline
chapterintro\verb+@+color & 0.73,0.39,0,0.51 & Couleur de la citation optionnelle � chaque d�but de chapitre\\
\hline
chapter\verb+@+title\verb+@+color & 0.59,0.11,0,0.59 & Couleur du titre des chapitres\\
\hline
section\verb+@+title\verb+@+color & 1,0.2,0.3,0.1 & Couleur du titre des sections\\
\hline
subsection\verb+@+title\verb+@+color & 0,0.6,0.9,0 & Couleur du titre des subsections\\
\hline
subsubsection\verb+@+title\verb+@+color & 0.71,0,0.87,0.35 & Couleur du titre des subsubsections\\
paragraph\verb+@+title\verb+@+color & 0.78,0,0.74,0.45 & Couleur du titre des paragraphes\\
\hline
subparagraph\verb+@+title\verb+@+color & 0.78,0,0.74,0.45 & Couleur du titre des sous-paragraphes\\
\hline
arrayrule\verb+@+color & 1,0.2,0.3,0.1 & Traits des tableaux\\
\hline
cell\verb+@+color & 0.21,0.04,0,0.18 & fond des cellules d'un tableau sur toute une ligne avec la commande \arraybackslash\texttt{firstline}\\
\hline
remtitle\verb+@+color & 0,0,0,0 & Couleur du titre des remarques \\
\hline
remtitle\verb+@+bg\verb+@+color & 0.59,0.11,0,0.59 & Couleur de fond du titre des remarques \\
\hline
rem\verb+@+bg\verb+@+color & 0.07,0,0,0.20 & Couleur de fond des remarques \\
\hline
methtitle\verb+@+color & 0,0,0,0 & Couleur du titre des m�thodes \\
\hline
methtitle\verb+@+bg\verb+@+color & 0.15,0.87,0,0.60 & Couleur de fond du titre des m�thodes \\
\hline
meth\verb+@+bg\verb+@+color & 0.04,0.24,0,0.15 & Couleur de fond des m�thodes \\
\hline
def\verb+@+bg\verb+@+color & 0.14,0,0.14,0.03 & Couleur de fond des d�finitions\\
\hline
deftitle\verb+@+bg\verb+@+color & 0.89,0,0.89,0.38 & Couleur de fond du titre des d�finitions\\
\hline
deftitle\verb+@+color & 0,0.04,0.73,0 & Couleur du mot \og D�finition \fg\\
\hline
prop\verb+@+bg\verb+@+color & 0,0.16,0.17,0.03 & Couleur de fond des propri�t�s\\
\hline
proptitle\verb+@+bg\verb+@+color & 0,0.91,0.98,0.12 & Couleur de fond du titre des propri�t�s\\
\hline
proptitle\verb+@+color & 0,0.04,0.73,0 & Couleur du mot \og Propri�t� \fg\\
\hline
thm\verb+@+bg\verb+@+color & 0,0.34,0.34,0.04 & Couleur de fond des th�or�mes\\
\hline
thmtitle\verb+@+bg\verb+@+color & 0,0.97,0.97,0.11 & Couleur de fond du titre des th�or�mes\\
\hline
thmtitle\verb+@+color & 0,0.04,0.73,0 & Couleur du mot \og Th�or�me \fg\\
\hline
ex\verb+@+bg\verb+@+color & 0.17,0.15,0,0.07 & Couleur de fond des exemples\\
\hline
extitle\verb+@+bg\verb+@+color & 0.88,0.76,0,0.61 & Couleur de fond du titre des exemples\\
\hline
extitle\verb+@+color & 0,0.04,0.73,0 & Couleur du mot \og Exemple \fg\\
\hline
dem\verb+@+border\verb+@+color & 0,0,0,1 & Couleur du trait des d�monstrations\\
\hline
dem\verb+@+bg\verb+@+color & 0,0,0,0 & Couleur de fond des d�monstrations\\
\hline
activitytitle\verb+@+color & 0.25,0.85,0,0.38 & Couleur du titre des activit�s\\
\hline
activitynum\verb+@+color & 0,0,0,0 & Couleur du num�ro de l'activit�\\
\hline
exercices\verb+@+bg\verb+@+color & 0.17,0.07,0,0.12 & Couleur de fond des exercices (page enti�re)\\
\hline
exercicetitle\verb+@+bg\verb+@+color & 0.85,0.41,0,0.75 & Couleur de fond du titre de la page des exercices\\
\hline
exercicetitle\verb+@+color & 0,0,0,0 & Couleur du titre de la page des exercices\\
\hline
exercicenum\verb+@+bg\verb+@+color & 0.85,0.41,0,0.75 & Couleur de fond du num�ro des exercices\\
\hline
exercicenum\verb+@+color & 0,0,0,0 & Couleur du num�ro des exercices\\
\hline
corriges\verb+@+bg\verb+@+color & 0.11,0,0.09,0.09 & Couleur de fond des corrig�s (page enti�re)\\
\hline
corrigetitle\verb+@+bg\verb+@+color & 0.86,0,0.66,0.63 & Couleur de fond du titre de la page des corrig�s\\
\hline
corrigetitle\verb+@+color & 0,0,0,0 & Couleur du titre des corrig�s\\
\hline
corrigenum\verb+@+bg\verb+@+color & 0.86,0,0.66,0.63 & Couleur de fond du num�ro des corrig�s\\
\hline
corrigenum\verb+@+color & 0,0,0,0 & Couleur du num�ro des corrig�s\\
\hline
corref\verb+@+color & 0,0.88,0.88,0.45 & Couleur du texte \og \textsc{Correction page ...} \fg{} en fin de chaque �nonc�s d'exercice\\
\hline
firstpagetop\verb+@+bg\verb+@+color & 0.96,0.94,0,0.7 & Couleur du d�grad� haut de la page de couverture\\
\hline
firstpagebottom\verb+@+bg\verb+@+color & 0.82,0.80,0,0.58 & Couleur du d�grad� bas de la page de couverture\\
\hline
titledoc\verb+@+color & 0,0,0,0 & Couleur du titre de la couverture\\
\hline
firstpage\verb+@+lines\verb+@+color & 0.07,0,0,0.49 & Couleur des lignes (en haut) de la couverture\\
\hline
titleauthor\verb+@+color & 0,0,0,0 & Couleur en laquelle est �crit l'auteur\\
\hline
titledate\verb+@+color & 0,0,0,0 & Couleur en laquelle est �crite la date sur la couverture\\
\hline
indextitle\verb+@+bg\verb+@+color & 0.94,0.37,0,0.17 & Couleur de fond du titre de l'index\\
\hline
indextitle\verb+@+color & 0,0,0,0 & Couleur du titre de l'index\\
\hline
contentstitle\verb+@+color & 0.07,0,0,0.19 & Couleur du titre de la table des mati�res\\
\hline
contentstitleshadow\verb+@+color & 0.07,0,0,0.49 & Couleur de l'ombre du titre de la table des mati�res\\
\hline

\end{longtable}
\end{center}

\newpage

\subsection{Changer une couleur}\index{Red�finir une couleur}

\begin{lstlisting}
\redefineColor{<nom de la couleur>}{<nouvelle valeur CMYK}
% Exemple :
\makeatletter
\redefineColor{arrayrule@color}{0,0,0,1} % pour "noir"
\makeatother
\end{lstlisting}

\section{Les fontes}\index{fontes}

\subsection{Les fontes par d�faut}

Par d�faut, la fonte des titres est \og Grotesq \fg.

\medskip

\begin{center}
\begin{longtable}{|*3{>{\centering\arraybackslash}m{0.33\linewidth}|}}
\hline\firstline
\color{bleu}\bfseries Noms & 
\color{bleu}\bfseries Valeurs (CMYK) & 
\color{bleu}\bfseries Correspondances\\
\hline
\textbackslash chaptertitlename\verb+@+font & 
\textbackslash fontfamily\{ugq\} & 
\og Chapitre ... \fg{}\\
\hline
\textbackslash chaptertitle\verb+@+font & \textbackslash fontfamily\{ugq\} & Titre des chapitres\\
\hline
\textbackslash pagenumber\verb+@+font & \textbackslash fontfamily\{ugq\} & Num�ro des pages\\
\hline
\textbackslash sectiontitle\verb+@+font & \textbackslash fontfamily\{ugq\} & Titre des sections\\
\hline
\textbackslash subsectiontitle\verb+@+font & \textbackslash fontfamily\{ugq\} & Titre des subsections\\
\hline
\textbackslash subsubsectiontitle\verb+@+font & \textbackslash fontfamily\{ugq\} & Titre des subsubsections\\
\hline
\textbackslash paragraphtitle\verb+@+font & \textbackslash fontfamily\{ugq\} & Titre des paragraphes\\
\hline
\textbackslash subparagraphtitle\verb+@+font & \textbackslash fontfamily\{phv\} & Titre des sous-paragraphes\\
\hline
\textbackslash remtitle\verb+@+font & \textbackslash fontfamily\{ugq\} & Titre du titre des remarques\\
\hline
\textbackslash methtitle\verb+@+font & \textbackslash fontfamily\{ugq\} & Titre du titre des m�thodes\\
\hline
\textbackslash deftitle\verb+@+font & \textbackslash fontfamily\{ugq\}\textbackslash small & Titre des d�finitions\\
\hline
\textbackslash proptitle\verb+@+font & \textbackslash fontfamily\{ugq\}\textbackslash small & Titre des propri�t�s\\
\hline
\textbackslash thmtitle\verb+@+font & \textbackslash fontfamily\{ugq\}\textbackslash small & Titre des th�or�mes\\
\hline
\textbackslash extitle\verb+@+font & \textbackslash fontfamily\{ugq\}\textbackslash small & Titre des exemples\\
\hline
\textbackslash activity\verb+@+font & \textbackslash fontfamily\{ugq\}\textbackslash large & Titre des activit�s\\
\hline
\textbackslash exercicetitle\verb+@+font & \textbackslash fontfamily\{ugq\}\textbackslash Huge & Titre de la page des exercices\\
\hline
\textbackslash exercicenum\verb+@+font & \textbackslash fontfamily\{ugq\}\textbackslash bfseries & Num�ro des exercices\\
\hline
\textbackslash corrigetitle\verb+@+font & \textbackslash fontfamily\{ugq\}\textbackslash Huge & Titre de la page des corrig�s\\
\hline
\textbackslash corrigenum\verb+@+font & \textbackslash fontfamily\{ugq\}\textbackslash bfseries & Num�ro des corrig�s\\
\hline
\textbackslash corref\verb+@+font & \textbackslash fontfamily\{phv\}\textbackslash bfseries\textbackslash itshape \textbackslash small & \og Correction page ... \fg\\
\hline
\textbackslash titledoc\verb+@+font & \textbackslash fontfamily\{ugq\}\textbackslash bfseries \textbackslash itshape\textbackslash fontsize\{34\}\{36\} & Titre sur la couverture\\
\hline
\textbackslash titleauthor@font & \textbackslash fontfamily\{ugq\}\textbackslash Huge & Nom de l'auteur sur la couverture\\
\hline
\textbackslash titledate@font & \textbackslash fontfamily\{ugq\}\textbackslash large & Date sur la couverture\\
\hline
\textbackslash indextitle@font & \textbackslash fontfamily\{ugq\}\textbackslash bfseries\textbackslash Huge & Titre de l'index\\
\hline
\textbackslash contentstitle@font & \textbackslash fontfamily\{ugq\}\textbackslash bfseries \textbackslash fontsize\{56\}\{58\} & Titre de la table des mati�res\\
\hline
\end{longtable}
\end{center}

\subsection{Changer une fonte}

\begin{lstlisting}
\def<nom de la fonte>{\fontfamily{<nom>}\selectfont}
\makeatletter% Exemple :
\def\chaptertitle@font{\fontfamily{phv}\selectfont}
\makeatother
\end{lstlisting}

%%%%%%%%%%%%%%%%%%%%%%%%%% CH 3 : les longueurs

\chapter{Les longueurs}\index{longueurs}

\begin{center}
\begin{longtable}{|>{\ttfamily\centering}m{0.25\linewidth}|>{\centering}m{0.2\linewidth}|m{0.45\linewidth}|}
\hline\firstline
\normalfont\selectfont\bfseries\color{bleu} Noms\strut & 
\bfseries\color{bleu} Valeurs par d�faut & 
\bfseries\color{bleu}\centering\arraybackslash Correspondances\\
\hline
\textbackslash cellspacetoplimit & 3pt & Espace entre le trait sup�rieur d'une cellule et le texte quand on utilise la lettre \og S \fg{} dans l'environnement du tableau. \\ 
\hline
\textbackslash cellspacebottomlimit & 3pt & Espace entre le trait inf�rieur d'une cellule et le texte quand on utilise la lettre \og S \fg{} dans l'environnement du tableau. \\ 
\hline
\textbackslash parindent & 0pt & Indentation par d�faut du document. \\
\hline
\textbackslash decalnumsec & $-0.5$em & Pour que le num�ro des sections et leur titre soient align�s, il y a un d�calage vertical vers le bas par d�faut. Sinon, la base du \og cadre \fg{} comportant le num�ro serait align�e avec celle du titre. \\
\hline
\textbackslash decalnumsubsec & $-0.5$em & Idem avec les subsections.\\
\hline
\textbackslash decalnumsubsubsec & $-0.5$em & Idem avec les subsubsections.\\
\hline
\textbackslash spacetitlesec & 0.5em & Espace entre le num�ro des sections et leur titre.\\
\hline
\textbackslash spacetitlesubsec & 0.2em & Espace entre le num�ro des subsections et leur titre.\\
\hline
\textbackslash spacetitlesubsubsec & 0.2em & Espace entre le num�ro des subsubsections et leur titre.\\
\hline
\textbackslash decalxtitlesubsec & 0pt & D�calage horizontal des titres des subsections.\\
\hline
\textbackslash decalxtitlesubsubsec & 0pt & D�calage horizontal des titres des subsubsections.\\
\hline
\textbackslash spacebeforerem & 1em & Espace vertical avant chaque remarque\\
\hline
\textbackslash spacebeforemeth & 1em & Espace vertical avant chaque m�thode\\
\hline
\textbackslash spacebeforedef & 1em & Espace vertical avant chaque d�finition\\
\hline
\textbackslash spacebeforeprop & 1em & Espace vertical avant chaque propri�t�\\
\hline
\textbackslash spacebeforethm & 1em & Espace vertical avant chaque th�or�me\\
\hline
\textbackslash spacebeforeex & 1em & Espace vertical avant chaque exemple\\
\hline
\textbackslash spacebeforedem & 1em & Espace vertical avant chaque d�monstration\\
\hline
\textbackslash spacebeforeact & 1em & Espace vertical avant chaque activit�\\
\hline
\textbackslash spacebeforeexo & 1em & Espace vertical avant chaque exercice\\
\hline
\textbackslash spacebefornew & 1em & Espace vertical avant chaque nouvelle box d�finie\\
\hline
\textbackslash spacebottomrem & 1em & Espace vertical apr�s chaque remarque (dans le cadre)\\
\hline
\textbackslash spacebottommeth & 1em & Espace vertical apr�s chaque m�thode (dans le cadre)\\
\hline
\textbackslash spacebottomnew & 1em & Espace vertical apr�s chaque nouvelle box d�finie (dans le cadre)\\
\hline
\textbackslash marginleft & 6em & Espace vertical consacr� aux titres des d�finitions, th�or�mes, propri�t�s, ...\\
\hline
\textbackslash margintoptitle & 4em & Espace vertical au-dessus du titre sur la couverture (par rapport au bord sup�rieur de la page)\\
\hline
\textbackslash marginlefttitle & 4em & Marge � gauche du titre sur la couverture\\
\hline
\textbackslash marginbottompic & 4em & Espace vertical en bas de l'image (facultative) de la couverture\\
\hline
\textbackslash marginrightpic & 4em & Marge � droite de l'image (facultative) sur la couverture\\
\hline
\textbackslash margintopauthor & 20em & Espace vertical au-dessus du nom de l'auteur sur la couverture (par rapport au bord sup�rieur de la page)\\
\hline
\textbackslash marginrightdate & 4em & Marge � droite de la date sur la couverture\\
\hline
\textbackslash marginbottomdate & 0em & Espace vertical entre la date et le milieu vertical de la page\\
\hline
\textbackslash controltoctitle & 0.25cm & contr\^ole du chemin du titre de la table des mati�res\\
\hline
\end{longtable}
\end{center}

\chapter{Bien utiliser la classe}

\section{La couverture}\index{couverture}

Le titre, le (ou les) auteur(s) ainsi que la date sont d�clar�s comme d'habitude :

\medskip

\begin{lstlisting}
\title{Mon titre}
\author{Moi \and Lui}
\date{\today}
\end{lstlisting}

\medskip

Vous avez la possibilit� d'inclure une image � l'aide de la commande :

\medskip

\begin{lstlisting}
\titlepic[<�chelle>]{<nom de l'image>}
% Par exemple :
\titlepic[0.5]{fractale.jpg}
\end{lstlisting}

\medskip

Comme vous pouvez le remarquer, il y a un effet autour de l'image.  En fait, l'image est agrandie (avec un coefficient d'agrandissement par d�faut de 1.05) et mise sous l'image originale avec un coefficient d'opacit� (par d�faut, 0.2). Si vous souhaitez l'�liminer, vous pouvez utiliser l'une des m�thodes suivantes :

\medskip

\begin{lstlisting}
%  pour fixer le coefficient d'agrandissement � 1
\def\coef@bg@pic{1}
% Pour fixer l'opacit� � 0
\def\coef@opacity@pic{0}
\end{lstlisting}

\medskip

Si vous voulez agrandir l'effet, il suffit de mettre le coefficient d'agrandissement � \og 1.1 \fg{} par exemple, ou plus.

\section{Les tableaux}

\subsection{Espaces dans les cellules}

Si l'on d�sire ins�rer des formules math�matiques dans un tableau simple, voil� ce que cela donne :

\medskip

\begin{minipage}{0.55\linewidth}
\begin{lstlisting}
\begin{tabular}{|c|c|}
\hline
Somme & Valeur\\
\hline
$1+\dfrac{1}{2^2}+\cdots+\dfrac{1}{n^2}+\cdots$
&
$\dfrac{\pi^2}{6}$\\
\hline
\end{tabular}
\end{lstlisting}
\end{minipage}
\begin{minipage}{0.4\linewidth}
\begin{center}
\begin{tabular}{|c|c|}
\hline
Somme & Valeur\\
\hline
$1+\dfrac{1}{2^2}+\cdots+\dfrac{1}{n^2}+\cdots$
&
$\dfrac{\pi^2}{6}$\\
\hline
\end{tabular}
\end{center}
\end{minipage}

On peut remarquer que les �critures sont trop coll�es aux traits du tableau. C'est la raison pour laquelle j'ai inclus l'extension \texttt{cellspace}, qui permet de \og d�coller \fg{} tout �a :

\medskip

\begin{minipage}{0.55\linewidth}
\begin{lstlisting}
\begin{tabular}{|Sc|Sc|}
\hline
Somme & Valeur\\
\hline
$1+\dfrac{1}{2^2}+\cdots+\dfrac{1}{n^2}+\cdots$
&
$\dfrac{\pi^2}{6}$\\
\hline
\end{tabular}
\end{lstlisting}
\end{minipage}
\begin{minipage}{0.4\linewidth}
\begin{center}
\begin{tabular}{|Sc|Sc|}
\hline
Somme & Valeur\\
\hline
$1+\dfrac{1}{2^2}+\cdots+\dfrac{1}{n^2}+\cdots$
&
$\dfrac{\pi^2}{6}$\\
\hline
\end{tabular}
\end{center}
\end{minipage}

Les marges sont fix�es par d�faut par la classe � l'aide des commandes :

\medskip

\begin{lstlisting}
\setlength{\cellspacetoplimit}{3pt}
\setlength{\cellspacebottomlimit}{3pt}
\end{lstlisting}

On peut donc augmenter ces espaces en changeant \og \texttt{3pt} \fg{} par ce que l'on veut.

\medskip

On peut utiliser \og \texttt{S} \fg{} avec les options \og \texttt{m} \fg, \og \texttt{p} \fg, \og \texttt{c} \fg, \og \texttt{l} \fg{} et \og \texttt{r} \fg, mais il faudra veiller � mettre entre accolades les options \og \texttt{m} \fg{} et \og \texttt{p} \fg{} comme le montre l'exemple suivant :

\medskip

\begin{minipage}{0.5\linewidth}
\begin{lstlisting}
\begin{tabular}{|S{m{2cm}}|S{p{3cm}}|}
\hline
Colonne 1 & Colonne 2\\
\hline
\end{tabular}
\end{lstlisting}
\end{minipage}
\begin{minipage}{0.45\linewidth}
\begin{center}
\begin{tabular}{|S{m{2cm}}|S{p{2cm}}|}
\hline
Colonne 1 & Colonne 2\\
\hline
\end{tabular}
\end{center}
\end{minipage}

\subsection{Une ligne en couleur}

On peut ins�rer une ligne en couleur � l'aide de la commande \textbackslash\texttt{firstline} :

\medskip

\begin{minipage}{0.55\linewidth}
\begin{lstlisting}
\begin{tabular}{|Sc|Sc|}
\hline\firstline
Somme & Valeur\\
\hline
$1+\dfrac{1}{2^2}+\cdots+\dfrac{1}{n^2}+\cdots$
&
$\dfrac{\pi^2}{6}$\\
\hline
\end{tabular}
\end{lstlisting}
\end{minipage}
\begin{minipage}{0.4\linewidth}
\begin{center}
\begin{tabular}{|Sc|Sc|}
\hline\firstline
Somme & Valeur\\
\hline
$1+\dfrac{1}{2^2}+\cdots+\dfrac{1}{n^2}+\cdots$
&
$\dfrac{\pi^2}{6}$\\
\hline
\end{tabular}
\end{center}
\end{minipage}

\begin{remarque}
On peut utiliser cette commande ailleurs qu'� la premi�re ligne ...
\end{remarque}

\section{Les environnements}\index{Les divers environnements (box)}

\subsection{Les remarques}\index{Box Remarque}

\begin{minipage}{0.35\linewidth}
\begin{lstlisting}
\begin{remarque}
Une remarque
\end{remarque}

\begin{remarque}[s]
Plusieurs remarques :\par
\begin{itemize}
\item Remarque 1
\item Remarque 2
\end{itemize}
\end{remarque}
\end{lstlisting}
\end{minipage}
\begin{minipage}{0.1\linewidth}
~\par
\end{minipage}
\begin{minipage}{0.45\linewidth}
\begin{remarque}
Une remarque
\end{remarque}

\begin{remarque}[s]
Plusieurs remarques :\par
\begin{itemize}
\item Remarque 1
\item Remarque 2
\end{itemize}
\end{remarque}
\end{minipage}

\subsection{Les m�thodes}\index{Box M�thode}

\begin{minipage}{0.35\linewidth}
\begin{lstlisting}
\begin{methode}
Une m�thode
\end{methode}

\begin{methode}[s]
Plusieurs m�thodes :\par
\begin{itemize}
\item M�thode 1
\item M�thode 2
\end{itemize}
\end{methode}
\end{lstlisting}
\end{minipage}
\begin{minipage}{0.1\linewidth}
~\par
\end{minipage}
\begin{minipage}{0.45\linewidth}
\begin{methode}
Une m�thode
\end{methode}

\begin{methode}[s]
Plusieurs m�thodes :\par
\begin{itemize}
\item M�thode 1
\item M�thode 2
\end{itemize}
\end{methode}
\end{minipage}

\subsection{Les d�finitions}\index{Box D�finitions}

\begin{lstlisting}
\begin{definition}[<s>] % [s] en option pour le pluriel
Ceci est une d�finition.
\end{definition}
\end{lstlisting}

\begin{definition}
Ceci est une d�finition
\end{definition}

\subsection{Les propri�t�s}\index{Box Propri�t�s}

\begin{lstlisting}
\begin{propriete}[s] % [s] en option pour le pluriel
Ceci est une propri�t�.\par
Ceci est une autre propri�t�.
\end{propriete}
\end{lstlisting}

\begin{propriete}[s]
Ceci est une propri�t�.\par
Ceci est une autre propri�t�.
\end{propriete}

\newpage

\subsection{Les th�or�mes}\index{Box Th�or�mes}

\begin{lstlisting}
\begin{theoreme}[<s>] % [s] en option pour le pluriel
Ceci est un th�or�me.
\end{theoreme}
\end{lstlisting}

\begin{theoreme}
Ceci est un th�or�me.
\end{theoreme}

\subsection{Les exemples}\index{Box Exemples}

\begin{lstlisting}
\begin{exemple}[s] % [s] en option pour le pluriel
Ceci est un exemple.\par
Ceci est un autre exemple.
\end{exemple}
\end{lstlisting}

\begin{exemple}[s]
Ceci est un exemple.\par
Ceci est un autre exemple.
\end{exemple}

\subsection{Les d�monstrations}\index{Box D�monstrations}

\begin{lstlisting}
\begin{demonstration}
\lipsum[1]
\end{demonstration}
\end{lstlisting}

\begin{demonstration}
\lipsum[1]
\end{demonstration}

Par d�faut, le trait est � gauche ; cependant, il y a plusieurs possibilit�s :

\subsubsection{Option \og 0 \fg}

\begin{lstlisting}
\makeatletter
\redefineColor{dem@bg@color}{0.02,0.02,0,0.11}
\makeatother
\begin{demonstration}[0]
\lipsum[2]
\end{demonstration}
\end{lstlisting}

\makeatletter
\redefineColor{dem@bg@color}{0.02,0.02,0,0.11}
\makeatother
\begin{demonstration}[0]
\lipsum[2]
\end{demonstration}

\subsubsection{Option \og 2 \fg}

\begin{lstlisting}
\begin{demonstration}[2]
\lipsum[2]
\end{demonstration}
\end{lstlisting}

\makeatletter
\redefineColor{dem@bg@color}{0,0,0,0}
\makeatother
\begin{demonstration}[2]
\lipsum[2]
\end{demonstration}

\subsubsection{Option \og 3 \fg}

\begin{lstlisting}
\begin{demonstration}[3]
\lipsum[2]
\end{demonstration}
\end{lstlisting}

\begin{demonstration}[3]
\lipsum[2]
\end{demonstration}

\subsubsection{Option \og 4 \fg}

\begin{lstlisting}
\begin{demonstration}[4]
\lipsum[2]
\end{demonstration}
\end{lstlisting}

\begin{demonstration}[4]
\lipsum[2]
\end{demonstration}

\subsubsection{Option \og 5 \fg}

\begin{lstlisting}
\begin{demonstration}[5]
\lipsum[2]
\end{demonstration}
\end{lstlisting}

\begin{demonstration}[5]
\lipsum[2]
\end{demonstration}

\subsection{Couper un environnement : la commande \textbackslash breakbox}\index{Couper une box}

Dans les cas o� un environnement est plus grand que l'espace vertical qu'il reste en bas de page courante, il est possible de le couper avec la commande \textbf{\textbackslash breakbox}. Ainsi, le code suivant :

\begin{lstlisting}
\begin{propriete}[s]
Le produit scalaire nous permet d'�tablir :
\begin{itemize}
\item le th�or�me de la m�diane;
\item le th�or�me d'Al-Kaschi;
\item la formule des sinus.
\end{itemize}
\breakbox
De plus, il nous permet d'�tablir une �quation cart�sienne d'un cercle :
\[
\rm M\in\mathscr{C}\coord{\Omega}{r} \Longleftrightarrow (x-a)^2+(y-b)^2=r^2
\]
o� $\Omega\coord{a}{b}$ est le centre du cercle $\mathscr{C}$ et $r$ son rayon.
\end{propriete}
\end{lstlisting}

donnera :

\begin{propriete}[s]
Le produit scalaire nous permet d'�tablir :
\begin{itemize}
\item le th�or�me de la m�diane;
\item le th�or�me d'Al-Kaschi;
\item la formule des sinus.
\end{itemize}
\breakbox
De plus, il nous permet d'�tablir une �quation cart�sienne d'un cercle :
\[
M(x\;;y)\in\mathscr{C}(\Omega\;;r) \Longleftrightarrow (x-a)^2+(y-b)^2=r^2
\]
o� $\Omega(a\;;b)$ est le centre du cercle $\mathscr{C}$ et $r$ son rayon.
\end{propriete}

\subsection{D�finir une nouvelle box comme la box \og Remarque \fg{} }\index{Red�finir une box}

\begin{lstlisting}
\DefineNewBoxLikeRem{nom}{titre}{couleur principale}{couleur texte}{fonte titre et items}
% Exemple :
\DefineNewBoxLikeRem{mabox}{Ma box � moi}{yellow}{red}{phv}
\begin{mabox}
Ceci est ma box � moi tout seul !
\end{mabox}
\end{lstlisting}

\DefineNewBoxLikeRem{mabox}{Ma box � moi}{yellow}{red}{phv}
\begin{mabox}
Ceci est ma box � moi tout seul !
\end{mabox}

\paragraph*{Remarque :} par d�faut, la fonte utilis�e pour les titres est \og ugq \fg.

\subsection{D�finir une nouvelle box comme la box \og D�finition \fg{} }

\begin{lstlisting}
\DefineNewBoxLikeDef{nom}{titre}{couleur principale}{couleur texte}{fonte titre et items}
% Exemple :
\DefineNewBoxLikeDef{mybox}{Ma box}{yellow}{red}{phv}
\begin{mybox}
Ceci est ma box � moi tout seul !
\breakbox
Ma mienne !
\end{mybox}
\end{lstlisting}

\DefineNewBoxLikeDef{mybox}{Ma box}{yellow}{red}{phv}
\begin{mybox}
Ceci est ma box � moi tout seul !
\breakbox
Ma mienne !
\end{mybox}

\section{Les commandes}\index{commandes}

\subsection{Les citations en d�but de chaque chapitre}

Ces citations sont facultatives ; cependant, si vous en mettez une � un chapitre et que vous n'en voulez plus apr�s, il faudra sp�cifier au chapitre suivant une citation vide.

\medskip

Pour d�clarer une citation, il faut ins�rer la commande suivante avant la commande \textbackslash\texttt{chapter} :

\medskip

\begin{lstlisting}
\intro{<Citation>}
\introauthor{<auteur de la citation>}
\chapter{<titre du chapitre>}
\end{lstlisting}

\subsection{Les listes}

Par d�faut, les listes ont �t� l�g�rement modifi�es :

\medskip

\begin{minipage}{0.4\linewidth}
\begin{lstlisting}
\begin{itemize}
\item Item 1
\begin{itemize}
\item Sous-item 1
\item Sous-item 2
\end{itemize}
\item Item 2
\end{itemize}
\end{lstlisting}
\end{minipage}
\begin{minipage}{0.05\linewidth}
~\par
\end{minipage}
\begin{minipage}{0.4\linewidth}
\begin{itemize}
\item Item 1
\begin{itemize}
\item Sous-item 1
\item Sous-item 2
\end{itemize}
\item Item 2
\end{itemize}
\end{minipage}

\medskip

Le style des items ainsi que celui des num�rotations est automatiquement ajust� � l'environnement dans lequel vous \^etes : dans les environnements \og remarque \fg{} et \og methode \fg, les puces et les num�ros seront de la m\^eme couleur que la couleur principale. Il en sera de m�me dans les parties \og exercices \fg{} et \og corrig�s \fg.

\medskip

Si la couleur ne vous pla\^it pas, vous pouvez la changer � l'aide de la commande suivante :

\medskip

\begin{lstlisting}
\itemclass{<nom de la couleur>}{<fonte utilis�e>}
% Exemple 1 : les puces seront rouges et la fonte inchang�e
\itemclass{red}{}
% Exemple 2 : les puces seront bleues et la fonte sera "helvetica"
\itemclass{blue}{\fontfamily{phv}\selectfont}
\end{lstlisting}

\subsection{Les activit�s}\index{Titre des activit�s}

\begin{lstlisting}
\activite{Une application du th�or�me de Pythagore}
\begin{enumerate}
\item
\begin{enumerate}
\item Construire un triangle DEF tel que DE = 7,2 cm, EF = 4 cm et FD = 6 cm.
\item Quel est le plus grand c\^ot� de ce triangle ?
\end{enumerate}
\item
\begin{enumerate}
\item Calculer DE$^2$ puis $\text{EF}^2+\text{FD}^2$.
\item Expliquer pourquoi le triangle DEF n'est pas rectangle.
\end{enumerate}
\end{enumerate}
\end{lstlisting}


\activite{Activit�}

\begin{enumerate}
\item
\begin{enumerate}
\item Construire un triangle DEF tel que DE = 7,2 cm, EF = 4 cm et FD = 6 cm.
\item Quel est le plus grand c\^ot� de ce triangle ?
\end{enumerate}
\item
\begin{enumerate}
\item Calculer DE$^2$ puis $\text{EF}^2+\text{FD}^2$.
\item Expliquer pourquoi le triangle DEF n'est pas rectangle.
\end{enumerate}
\end{enumerate}

\newpage

\section{Les exercices}\index{Exercices : insertion des �nonc�s}

\subsection{Ajout de la partie \og exercices \fg}

Si vous souhaitez ajouter une partie \og exercices \fg{} � votre document, cela se fera � l'aide de la commande :

\medskip

\begin{lstlisting}
\exostart[1] % l'option [1] quand on met les corrig�s
\end{lstlisting}

\medskip

Cela aura pour effet de cr�er une nouvelle page sur fond color� en ajoutant un titre, comme le montre la page suivante.


\subsection{Environnement \og exercice \fg}

Pur cr�er un nouvel exercice, on utilisera l'environnement :

\medskip

\begin{lstlisting}
\begin{exercice}
Mon bel exercice.
\end{exercice}
\end{lstlisting}

\medskip

Il arrive que l'�nonc� soit long et d�borde d'une page � l'autre.\\
Pour �viter des d�sagr�ments de mise en page, on pourra utiliser l'option suivante :

\medskip

\begin{lstlisting}
\begin{exercice}
Le d�but d'un �nonc� assez long...
\end{exercice}

\begin{exercice}[1]
La suite de l'�nonc� assez long.
\end{exercice}
\end{lstlisting}

\medskip

Cette option permet de \og couper \fg{} l'environnement \og exercice \fg{} mais il ne faut pas le couper en plein environnement \og enumerate \fg. On pourra adopter la solution suivante :

\medskip

\begin{lstlisting}
\begin{exercice}
\begin{enumerate}
\item Question 1
\item Question 2
\end{enumerate}
\end{exercice}

\begin{exercice}[1]
\begin{enumerate}[start=3]
\item Question 3
\end{enumerate}
\end{exercice}
\end{lstlisting}

\medskip

Dans l'exemple page suivante, j'ai utilis� l'environnement \og multicols \fg{} qui permet de s�parer la page en deux.

\exostart[1]

\setlength{\columnseprule}{1pt}

\begin{multicols}{2}
\begin{exercice}
\lipsum[1]
\end{exercice}
% \begin{correction}
% \lipsum[1]
% \end{correction}

\begin{exercice}
\lipsum[2]
\end{exercice}
% \begin{correction}
% \lipsum[2]
% \end{correction}

\begin{exercice}
Un d�but d'exercice.\par
La suite de l'exercice :

\begin{enumerate}
\item Question 1
\item Question 2
\item Question 3
\end{enumerate}
\end{exercice}
% \begin{correction}
% \begin{enumerate}
% \item R�ponse Question 1
% \item R�ponse Question 2
% \item R�ponse Question 3
% \item R�ponse Question 4
% \item R�ponse Question 5
% %\end{enumerate}
% %\BreakCorr[\columnbreak]
% %\begin{enumerate}[start=6]
% \item R�ponse Question 6
% \end{enumerate}
% \end{correction}

\columnbreak

\begin{exercice}[1]
\begin{enumerate}[start=4]
\item Question 4
\item Question 5
\item Question 6
\end{enumerate}
\end{exercice}

\begin{exercice}
\lipsum[1]
\end{exercice}
% \begin{correction}
% \lipsum[1]
% \end{correction}

\begin{exercice}
\lipsum[1]
\end{exercice}
% \begin{correction}
% \lipsum[1]
% \end{correction}
\end{multicols}

\newpage\pagecolor{white}

\section{Les corrig�s}\index{Exercices : insertion des corrig�s}

\subsection{L'environnement \og correction \fg}
Lorsque l'on met les corrig�s de chaque exercices, il faut faire suivre chaque environnement \og exercice \fg{} par un environnement \og correction \fg{} dans lequel on mettra la correction de l'exercice.

\medskip

\begin{lstlisting}
\begin{exercice}
Enonc�.
\end{exercice}
\begin{correction}
Correction.
\end{correction}
\end{lstlisting}

\subsection{Couper une correction}

\subsubsection{Saut de page}

\begin{lstlisting}
\begin{correction}
Correction sur la page 1
\BreakCorr
Suite de la correction sur la page 2.
\end{correction}
\end{lstlisting}

\subsubsection{Saut de colonne}

\begin{lstlisting}
\begin{correction}
Correction sur la colonne 1
\BreakCorr[\columnbreak]
Suite de la correction sur la colonne 2.
\end{correction}
\end{lstlisting}

Dans l'exemple des corrections d'exercices qui vient, j'ai utilis� le code suivant pour l'exercice 3 :

\begin{lstlisting}
\begin{correction}
\begin{enumerate}
\item R�ponse Question 1
\item R�ponse Question 2
\item R�ponse Question 3
\item R�ponse Question 4
\item R�ponse Question 5
\end{enumerate}
\BreakCorr[\columnbreak]
\begin{enumerate}[start=6]
\item R�ponse Question 6
\end{enumerate}
\end{correction}
\end{lstlisting}

\newpage

\subsection{Le r�pertoire o� sont mises les corrections}

Il faut imp�rativement cr�er dans le r�pertoire courant un sous-r�pertoire nomm� \og corriges \fg{} car c'est dans ce r�pertoire que seront automatiquement enregistr�s les corrections.

\subsection{Afficher les corrections}

\subsubsection{Cr�ation de la partie \og Corrig�s des exercices \fg}

\begin{lstlisting}
\corrstart
\end{lstlisting}

\medskip

Cette commande cr�� une nouvelle page et met le titre.

\subsubsection{Afficher toutes les corrections}

\begin{lstlisting}
\AfficheCorriges[<liste d'options>]
\end{lstlisting}

Les options seront de la forme \og <num ex/commande> \fg, o� \og num ex \fg{} est le num�ro de l'exercice pour lequel la commande doit \^etre ex�cut�e. Par exemple :

\medskip

\begin{lstlisting}
\AfficheCorriges[3/\columnbreak] 
% ex�cute la commande avant d'afficher la correction de l'exercice 3
\end{lstlisting}

\corrstart\enlargethispage*{\baselineskip}

% \begin{multicols}{2}
% \AfficheCorriges[4/{\columnbreak}]
% \end{multicols}

\newpage\pagecolor{white}

\section{Table des mati�res}\index{Table des mati�res}

\subsection{Le titre}

Par d�faut, le titre est \og Sommaire \fg{} mais il peut \^etre chang� � l'aide de la commande :

\medskip

\begin{lstlisting}
% par exemple :
\addto\captionsfrench{\renewcommand{\contentsname}{Table des mati�res}}
\end{lstlisting}

\medskip

Comme vous le voyez, le titre suis un \og chemin \fg{} ; quand le titre est plus long que celui par d�faut, il se peut qu'il empi�te sur le sommaire lui m\^eme ; il faut alors jouer sur le \og contr\^ole \fg{} du chemin :

\medskip

\begin{lstlisting}
\setlength{\controltoctitle}{0.1cm} % par exemple
\end{lstlisting}

\medskip

Par d�faut, le contr\^ole est � 0,25 cm.

\subsection{Le sommaire}

Il se met avec la commande :

\medskip

\begin{lstlisting}
\tableofcontents
\end{lstlisting}


\section{Cr�ation d'un index}

\subsection{D�finition du nombre de colonnes}

Par d�faut, l'index s'affiche sur 2 colonnes. On peut y rem�dier � l'aide de la commande suivante :

\medskip

\begin{lstlisting}
\def\nbcolindex{<nombre de colonnes>}
% Exemple :
\def\nbcolindex{1} % pour 1 colonne
\end{lstlisting}

\subsection{Cr�ation et affichage de l'index}

Je rappelle que vous devez mettre la commande  :

\medskip

\begin{lstlisting}
\makeindex
\end{lstlisting}

\medskip

en pr�ambule du document et la commande :

\medskip

\begin{lstlisting}
\printindex
\end{lstlisting}

\medskip

� l'endroit o� vous souhaitez afficher l'index. De plus, le titre \og Index \fg{} peut \^etre chang� � l'aide de la commande :

\medskip

\begin{lstlisting}
\renewcommand{\indexname}{<nom personnalis�>}
\end{lstlisting}

\medskip

De plus, vous devez cr�er le fichier \og index \fg{} � l'aide de la ligne de commande (dans le terminal de votre OS ou via votre �diteur \LaTeX -- TeXMaker le fait en appuyant sur la touche [F12]) :

\medskip

\begin{lstlisting}
makeindex %.idx
\end{lstlisting}

\medskip

Vous verrez en derni�re page le r�sultat.

\chapter{Mises � jour}

\paragraph*{18 ao\^ut 2013.} Il y avait un probl�me avec la d�claration de l'encodage \texttt{utf8}. Ceci vient d'\^etre rectifi�.

\medskip

\paragraph*{8 mai 2016.} R�solution du probl�me d'encodage de certains caract�res, cr�ation de la commande \texttt{\textbackslash breakbox}.

\medskip

\paragraph*{7 septembre 2016.} R�solution d'un bug concernant la disposition des exercices et corrig�s, et cr�ation des commandes \textbackslash DefineNewBoxLikeRem et \textbackslash DefineNewBoxLikeDef.

\medskip

\paragraph*{26 mai 2019.} Ajout de la commande \textbackslash BreakCorr qui permet d'ins�rer un saut de page dans un corrig� si ce dernier ne tient pas sur une seule page (ou \textbackslash BreakCorr[\textbackslash columnbreak] si on est dans un environnement multi-colonnes).


\backmatter

\def\nbcolindex{1}
\printindex
\end{document}
